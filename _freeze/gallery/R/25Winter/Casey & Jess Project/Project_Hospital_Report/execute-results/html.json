{
  "hash": "aec940ceaece7eccd98621c3630efad4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Project Hospital Report\"\nformat: html\nauthor: Casey Atkins & Jess\ndate: Jul-2025\ncategories: [R, 25Winter, \"data: hospital_data.csv\"]\n---\n\n## Hospital Wait Time Report\n\n### Step 0\n\nInitially we selected our dataset to study. We selected the QLD Hospital data.\n\n### Step 1\n\n*Goal: identify which variables are discrete (categorical) and which are continuous.* \n\nTo do this we: \nFirst: loaded our data \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndataset <- read.csv(\"../../../../data/hospital_data.csv\")\n```\n:::\n\n\nSecond: viewed the column names of our data \n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(dataset)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"X.1\"                                                  \n [2] \"X\"                                                    \n [3] \"Facility.HHS.Code\"                                    \n [4] \"Facility.HHS.Desc\"                                    \n [5] \"Last.Month.in.QTR\"                                    \n [6] \"Triage.Category\"                                      \n [7] \"Number.of.Attendances\"                                \n [8] \"Variation.in.the.number.of.attendances....\"           \n [9] \"Patients.Seen.within.clinically.recommended.times....\"\n[10] \"Median.Waiting.time.to.treatment..minutes.\"           \n[11] \"Patients.who.did.not.wait.for.treatment....\"          \n[12] \"Patients.admitted.from.the.Emergency.Department....\"  \n[13] \"Admissions.to.hospital.within.4.hours....\"            \n```\n\n\n:::\n:::\n\n\nThird: looked at the structure to see type of data in each column \n\n::: {.cell}\n\n```{.r .cell-code}\nstr(dataset)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t9442 obs. of  13 variables:\n $ X.1                                                  : int  1 2 3 4 5 6 7 8 9 10 ...\n $ X                                                    : int  0 1 2 3 4 5 6 7 8 9 ...\n $ Facility.HHS.Code                                    : int  1 1 1 1 1 1 4 4 4 4 ...\n $ Facility.HHS.Desc                                    : chr  \"Mater Adult\" \"Mater Adult\" \"Mater Adult\" \"Mater Adult\" ...\n $ Last.Month.in.QTR                                    : chr  \"Jun-24\" \"Jun-24\" \"Jun-24\" \"Jun-24\" ...\n $ Triage.Category                                      : chr  \"1\" \"2\" \"3\" \"4\" ...\n $ Number.of.Attendances                                : int  58 2998 6035 3767 513 13371 215 4986 13663 9169 ...\n $ Variation.in.the.number.of.attendances....           : num  -17.1 17.4 -4.4 -8 -20.8 -2.3 -0.5 -12.9 0.7 -8.1 ...\n $ Patients.Seen.within.clinically.recommended.times....: num  100 37.6 54.2 78.9 94.8 58.7 100 73.2 61.1 73.9 ...\n $ Median.Waiting.time.to.treatment..minutes.           : num  0 16 27 28 29 25 0 7 22 28 ...\n $ Patients.who.did.not.wait.for.treatment....          : num  0 1.2 3.1 6.4 15.8 4.1 0 0.2 2.5 4.5 ...\n $ Patients.admitted.from.the.Emergency.Department....  : num  72.4 44.9 40.8 20.8 6 34.9 71.2 59.5 41.5 13.8 ...\n $ Admissions.to.hospital.within.4.hours....            : num  31 22.2 26.1 39.4 41.9 27.4 43.1 44.9 34.1 40.3 ...\n```\n\n\n:::\n:::\n\n\nFourth: crated a summary of the dataset\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(dataset)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      X.1             X         Facility.HHS.Code Facility.HHS.Desc \n Min.   :   1   Min.   :  0.0   Min.   :    1     Length:9442       \n 1st Qu.:2361   1st Qu.:157.0   1st Qu.:   68     Class :character  \n Median :4722   Median :314.0   Median :  117     Mode  :character  \n Mean   :4722   Mean   :314.2   Mean   : 1091                       \n 3rd Qu.:7082   3rd Qu.:472.0   3rd Qu.:  192                       \n Max.   :9442   Max.   :629.0   Max.   :99999                       \n                                                                    \n Last.Month.in.QTR  Triage.Category    Number.of.Attendances\n Length:9442        Length:9442        Min.   :     0       \n Class :character   Class :character   1st Qu.:    84       \n Mode  :character   Mode  :character   Median :   375       \n                                       Mean   :  3754       \n                                       3rd Qu.:  1501       \n                                       Max.   :640258       \n                                                            \n Variation.in.the.number.of.attendances....\n Min.   :-100.000                          \n 1st Qu.:  -6.313                          \n Median :   5.000                          \n Mean   :  13.734                          \n 3rd Qu.:  22.095                          \n Max.   :1000.000                          \n NA's   :724                               \n Patients.Seen.within.clinically.recommended.times....\n Min.   :  0.00                                       \n 1st Qu.:  0.00                                       \n Median : 19.00                                       \n Mean   : 40.49                                       \n 3rd Qu.: 92.00                                       \n Max.   :100.00                                       \n NA's   :235                                          \n Median.Waiting.time.to.treatment..minutes.\n Min.   :  0.00                            \n 1st Qu.:  6.00                            \n Median : 74.00                            \n Mean   : 56.76                            \n 3rd Qu.: 98.28                            \n Max.   :100.00                            \n NA's   :168                               \n Patients.who.did.not.wait.for.treatment....\n Min.   :  0.00                             \n 1st Qu.:  2.00                             \n Median :  7.00                             \n Mean   : 17.36                             \n 3rd Qu.: 26.59                             \n Max.   :100.00                             \n NA's   :1000                               \n Patients.admitted.from.the.Emergency.Department....\n Min.   :  0.00                                     \n 1st Qu.: 21.15                                     \n Median : 50.00                                     \n Mean   : 52.34                                     \n 3rd Qu.: 87.50                                     \n Max.   :100.00                                     \n NA's   :669                                        \n Admissions.to.hospital.within.4.hours....\n Min.   :  0.00                           \n 1st Qu.: 59.00                           \n Median : 86.00                           \n Mean   : 76.48                           \n 3rd Qu.: 96.97                           \n Max.   :100.00                           \n NA's   :468                              \n```\n\n\n:::\n:::\n\nFifth: Created a summary of a specific columnn, in this case the Median wait time to gain treatment (mins).\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(dataset$Median.Waiting.time.to.treatment..minutes.)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n   0.00    6.00   74.00   56.76   98.28  100.00     168 \n```\n\n\n:::\n:::\n\n\n### Step 2\n*Goal: filter by a condition or group by and aggregate over a particular variable*\nThe condition we chose to filter by was Hospital Facility Name - Mater Adult.\nWe did this by loading dplyr, created another copy of the filtered data called \"subset\". It was filtered by Mater Adult to see only information from this facility. \n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nsubset=dataset %>% filter(Facility.HHS.Desc==\"Mater Adult\")\n```\n:::\n\nTo group we created a new dataset and then grouped by Facility code number\n\n::: {.cell}\n\n```{.r .cell-code}\naggregated=dataset\naggregated %>% group_by(Facility.HHS.Code)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9,442 × 13\n# Groups:   Facility.HHS.Code [105]\n     X.1     X Facility.HHS.Code Facility.HHS.Desc Last.Month.in.QTR\n   <int> <int>             <int> <chr>             <chr>            \n 1     1     0                 1 Mater Adult       Jun-24           \n 2     2     1                 1 Mater Adult       Jun-24           \n 3     3     2                 1 Mater Adult       Jun-24           \n 4     4     3                 1 Mater Adult       Jun-24           \n 5     5     4                 1 Mater Adult       Jun-24           \n 6     6     5                 1 Mater Adult       Jun-24           \n 7     7     6                 4 Prince Charles    Jun-24           \n 8     8     7                 4 Prince Charles    Jun-24           \n 9     9     8                 4 Prince Charles    Jun-24           \n10    10     9                 4 Prince Charles    Jun-24           \n# ℹ 9,432 more rows\n# ℹ 8 more variables: Triage.Category <chr>, Number.of.Attendances <int>,\n#   Variation.in.the.number.of.attendances.... <dbl>,\n#   Patients.Seen.within.clinically.recommended.times.... <dbl>,\n#   Median.Waiting.time.to.treatment..minutes. <dbl>,\n#   Patients.who.did.not.wait.for.treatment.... <dbl>,\n#   Patients.admitted.from.the.Emergency.Department.... <dbl>, …\n```\n\n\n:::\n:::\n\n\nWe then had to rename a column due to some errors (removed for reruns - \n\n::: {.cell}\n\n```{.r .cell-code}\naggregated <- rename(aggregated, \"Median_wait\" = \"Median.Waiting.time.to.treatment..minutes.\")\n```\n:::\n\n\n\nThen Grouped by facility and summarised mean average attendance, median wait time and Patients that didn't wait for treatment for each facility. We also had to remove missing data from the ptients not waititng for treatment column.\n\n::: {.cell}\n\n```{.r .cell-code}\nHosp_wait_time <- aggregated %>%  \n  group_by(Facility.HHS.Code) %>%  \n  summarise(avg_attendance = mean(Number.of.Attendances),\n            median_wait_time = median(Median_wait),\n            No_non_wait = mean(Patients.who.did.not.wait.for.treatment....,na.rm=TRUE))\n```\n:::\n\n\n### Step 3\n*Goal: create a visualisation of one to three variables in your summary data.*\nTo visualise this data we:\nload ggplot2\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n:::\n\nCreate a scatter plot of avg attendance vs med wait time\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = Hosp_wait_time, \n       mapping= aes(x = avg_attendance,\n       y = median_wait_time)) +\n  geom_point()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 42 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Project_Hospital_Report_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\nThis showed us a large outlier so we removed this using the code below:\n\n::: {.cell}\n\n```{.r .cell-code}\nfilter(Hosp_wait_time, Facility.HHS.Code != \"99999\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 104 × 4\n   Facility.HHS.Code avg_attendance median_wait_time No_non_wait\n               <int>          <dbl>            <dbl>       <dbl>\n 1                 1          4761.             40.2        22.6\n 2                 4         10404              50.8        25.1\n 3                11          5747.             55.2        34.8\n 4                15          6389.             46.5        27.1\n 5                16          6463.             52.5        26.1\n 6                22          5290.             66.2        27.5\n 7                28          4911.             66.6        22.6\n 8                29          8901              51.4        28.6\n 9                30          5328.             63          24.8\n10                32          7682.             68.1        26.7\n# ℹ 94 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\nsubset <- Hosp_wait_time %>% filter(Facility.HHS.Code !=\"99999\")\n```\n:::\n\n\nWe Then reran the graph without the outlier and added lables and a trend line.\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = subset, \n       mapping= aes(x = avg_attendance,\n                    y = median_wait_time)) +\n  geom_point()+\n  labs(title = \"Does Average Attendance Number Effect Median Wait Time?\",\n       x=\"Average Attendance\",\n       y=\"Median Wait Time\") +\n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 42 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 42 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Project_Hospital_Report_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\nWith the adjusted data we then also ran 2 more scatters with trend lines looking at other factors contributing to wait time and patients leaving without treatment. \n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = subset, \n       mapping= aes(x = median_wait_time,\n                    y = No_non_wait)) +\n  geom_point()+\n  labs(title = \"Does wait time influence Number of People Leaving without Treatment?\",\n       x=\"Median Wait Time\",\n       y=\"Number leaving without Treatment\") +\n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 42 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 42 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Project_Hospital_Report_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = subset, \n       mapping= aes(x = No_non_wait,\n                    y = avg_attendance)) +\n  geom_point()+\n  labs(title = \"Does Number Attending Hospital Influence Number of People Leaving without Treatment?\",\n       x=\"Number leaving without Treatment\",\n       y=\"Average Hospital Attendance Numbers\") +\n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Project_Hospital_Report_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n#### Linear Regression\n\nlooking at number of people that leave based on attendance numbers\n\nfirst filter out missing median_wait_time data, then created a linear model\n\n::: {.cell}\n\n```{.r .cell-code}\nsubset <- subset %>%   \n  filter(median_wait_time !=\"Missing\")\nmain_model <- lm(\"No_non_wait~avg_attendance\", subset)\n```\n:::\n\nTook the coefficients of the intercept and slope\n\n::: {.cell}\n\n```{.r .cell-code}\nb0 <- main_model$coefficients[1] #intercept\nb1 <- main_model$coefficients[2] #slope\n```\n:::\n\n\nThen made linear regression line on scatter with labels.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot(subset,\n       aes(x=avg_attendance,\n           y=No_non_wait))+\n  geom_point()+\n  labs(title = \"Does Number Attending Hospital Influence Number of People Leaving without Treatment?\",\n       x=\"Average Hospital Attendance Numbers\",\n       y=\"Number leaving without Treatment\") +\n  geom_abline(intercept = b0, slope = b1)\n```\n\n::: {.cell-output-display}\n![](Project_Hospital_Report_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nThen compared to Wait time to number of people leaving. \n\n::: {.cell}\n\n```{.r .cell-code}\nmodel3 <- lm(\"median_wait_time ~No_non_wait\", subset)\nb00 <- model3$coefficients[1] #intercept\nb11 <- model3$coefficients[2] #slope\nggplot(subset,\n       aes(x=No_non_wait,\n           y=median_wait_time))+\n  geom_point()+\n  labs(title = \"Does Number of People Leaving without Treatment Influence Median Wait Time?\",\n       x=\"Number leaving without Treatment\",\n       y=\"Median Wait Time\") +\n  geom_abline(intercept = b00, slope = b11)\n```\n\n::: {.cell-output-display}\n![](Project_Hospital_Report_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\n",
    "supporting": [
      "Project_Hospital_Report_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}